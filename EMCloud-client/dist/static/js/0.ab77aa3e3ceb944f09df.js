webpackJsonp([0],{"+jng":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),n=r.n(a),o=r("BO1k"),s=r.n(o),i=r("exGp"),u=r.n(i),c={name:"List.vue",data:function(){return{queryInfo:{query:"",pagenum:1,pagesize:20},goodsList:[],total:0}},created:function(){this.getGoodsList()},methods:{getGoodsList:function(){var e=this;return u()(n.a.mark(function t(){var r,a,o,i,u,c,l,d;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("goods",{params:e.queryInfo});case 2:if(r=t.sent,200===(a=r.data).meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取失败"));case 6:for(o=!0,i=!1,u=void 0,t.prev=9,c=s()(a.data.goods);!(o=(l=c.next()).done);o=!0)(d=l.value).add_time=e.$utils.formatToTime(d.add_time);t.next=17;break;case 13:t.prev=13,t.t0=t.catch(9),i=!0,u=t.t0;case 17:t.prev=17,t.prev=18,!o&&c.return&&c.return();case 20:if(t.prev=20,!i){t.next=23;break}throw u;case 23:return t.finish(20);case 24:return t.finish(17);case 25:e.goodsList=a.data.goods,e.total=a.data.total,e.$message.success("获取商品成功");case 28:case"end":return t.stop()}},t,e,[[9,13,17,25],[18,,20,24]])}))()},handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getGoodsList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getGoodsList()},deleteGoods:function(e){var t=this;this.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(u()(n.a.mark(function r(){var a;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("goods/"+e.goods_id);case 2:if(a=r.sent,200===a.data.meta.status){r.next=6;break}return r.abrupt("return",t.$message.error("删除用户失败"));case 6:t.getGoodsList(),t.$message({type:"success",message:"删除成功!"});case 8:case"end":return r.stop()}},r,t)}))).catch(function(){t.$message({type:"info",message:"已取消删除"})})},goAddpage:function(){this.$router.push("/goods/add")},goEditpage:function(e){this.$router.push("/goods/edit?id="+e)}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",[e._v("商品管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("商品列表")])],1),e._v(" "),r("el-card",{staticClass:"box-card"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入商品名称",clearable:""},on:{clear:e.getGoodsList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getGoodsList},slot:"append"})],1)],1),e._v(" "),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.goAddpage}},[e._v("添加商品")])],1)],1),e._v(" "),r("el-table",{attrs:{data:e.goodsList,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),r("el-table-column",{attrs:{prop:"goods_name",label:"商品名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"goods_price",label:"商品价格(元)"}}),e._v(" "),r("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量"}}),e._v(" "),r("el-table-column",{attrs:{prop:"add_time",label:"创建时间"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.goEditpage(t.row.goods_id)}}}),e._v(" "),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.deleteGoods(t.row)}}})]}}])})],1),e._v(" "),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[20,30,40,50],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var d=r("VU/8")(c,l,!1,function(e){r("/NUI")},"data-v-7b100319",null);t.default=d.exports},"/NUI":function(e,t){},BO1k:function(e,t,r){e.exports={default:r("fxRn"),__esModule:!0}},fxRn:function(e,t,r){r("+tPU"),r("zQR9"),e.exports=r("g8Ux")},g8Ux:function(e,t,r){var a=r("77Pl"),n=r("3fs2");e.exports=r("FeBl").getIterator=function(e){var t=n(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}}});
//# sourceMappingURL=0.ab77aa3e3ceb944f09df.js.json
